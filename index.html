<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Nutricional Universitario - v2</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
    body {
      font-family: Arial, sans-serif;
      background: linear-gradient(to right, #a1c4fd, #c2e9fb);
      text-align: center;
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }
    .container {
      max-width: 800px;
      width: 90%;
      margin: 20px auto;
      padding: 30px;
      background: rgba(255, 255, 255, 0.95);
      border-radius: 15px;
      box-shadow: 0 8px 32px rgba(0,0,0,0.1);
      animation: fadeIn 1s ease-out;
    }

        .welcome-screen {
            text-align: center;
            padding: 40px 0;
        }

        h1 {
            color: #27ae60;
            font-size: 2.5em;
            margin-bottom: 15px;
        }

        .start-btn {
            padding: 15px 40px;
            font-size: 1.2em;
            background: #27ae60;
            color: white;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(39, 174, 96, 0.3);
        }

        .start-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(39, 174, 96, 0.4);
        }

        .progress-container {
            width: 100%;
            height: 10px;
            background: #eee;
            border-radius: 5px;
            margin: 25px 0;
        }

        .progress-bar {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #27ae60 0%, #2ecc71 100%);
            border-radius: 5px;
            transition: width 0.5s ease;
        }

        .question-container {
            min-height: 300px;
            position: relative;
        }

        .question-card {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            animation: slideIn 0.5s ease;
        }

        .question-text {
            font-size: 1.3em;
            margin-bottom: 25px;
            color: #34495e;
        }

        .options-grid {
            display: grid;
            gap: 15px;
        }

        .option-btn {
            padding: 15px;
            border: 2px solid #bdc3c7;
            border-radius: 8px;
            background: white;
            cursor: pointer;
            transition: all 0.2s ease;
            text-align: left;
            font-size: 1em;
        }

        .option-btn:hover {
            transform: translateX(10px);
            border-color: #27ae60;
            background: #f8fff9;
        }

        .results-screen {
            text-align: center;
            padding: 30px;
            animation: zoomIn 0.5s ease;
        }

        .result-emoji {
            font-size: 6em;
            margin: 20px 0;
        }

        .result-text {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin: 25px 0;
        }

        .action-btns {
            margin-top: 30px;
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .action-btn {
            padding: 12px 25px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .restart-btn {
            background: #e74c3c;
            color: white;
        }

        .copy-btn {
            background: #3498db;
            color: white;
        }

.calendar-btn {
    background: #27ae60;
    color: white;
    transition: transform 0.3s ease-in-out;
    animation: pulse 1.5s infinite; /* Pulsando constantemente */
}

@keyframes pulse {
    0% {
        transform: scale(1);
    }
    50% {
        transform: scale(1.1); /* Aumenta el tama√±o */
    }
    100% {
        transform: scale(1);
    }
}



        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateX(20px); }
            to { opacity: 1; transform: translateX(0); }
        }

        @media (max-width: 768px) {
            .container {
                margin: 10px;
                padding: 20px;
            }
            
            .question-text {
                font-size: 1.1em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="welcome-screen" id="welcomeScreen">
            <h1>üçé Test Nutricional Universitario</h1>
            <p>¬°Descubre el estado de tus h√°bitos alimenticios en 10 preguntas!</p>
            <button class="start-btn" onclick="startTest()">Comenzar Test ‚Üí</button>
        </div>

        <div class="test-content" id="testContent" style="display: none;">
            <div class="progress-container">
                <div class="progress-bar" id="progressBar"></div>
            </div>
            <div class="question-container" id="questionContainer"></div>
        </div>

        <div class="results-screen" id="resultsScreen" style="display: none;">
            <div class="result-emoji" id="resultEmoji"></div>
            <div class="result-text" id="resultText"></div>
            <div class="action-btns" id="actionBtns"></div>
        </div>
    </div>

    <script>
        const questionBank = [
            {
                question: "¬øCu√°ntas porciones de frutas y verduras consumes diariamente?",
                options: [
                    { text: "Menos de 1 porci√≥n üòû", score: 1 },
                    { text: "1-2 porciones üòê", score: 2 },
                    { text: "3-4 porciones üôÇ", score: 3 },
                    { text: "5 o m√°s porciones ü•¶", score: 4 }
                ]
            },
            {
                question: "¬øCon qu√© frecuencia consumes agua en lugar de bebidas azucaradas?",
                options: [
                    { text: "Casi nunca üòû", score: 1 },
                    { text: "Algunas veces üòê", score: 2 },
                    { text: "Frecuentemente üôÇ", score: 3 },
                    { text: "Siempre üíß", score: 4 }
                ]
            },
      {
        question: "¬øCon qu√© frecuencia consumes frutas y verduras?",
        options: [
          { text: "Nunca üòû", score: 1 },
          { text: "Rara vez üòê", score: 2 },
          { text: "A veces üôÇ", score: 3 },
          { text: "Siempre üòä", score: 4 }
        ]
      },
      {
        question: "¬øQu√© tan seguido eliges alimentos integrales en lugar de refinados?",
        options: [
          { text: "Nunca üòû", score: 1 },
          { text: "Rara vez üòê", score: 2 },
          { text: "A veces üôÇ", score: 3 },
          { text: "Siempre üòä", score: 4 }
        ]
      },
      {
        question: "¬øCon qu√© regularidad consumes agua durante el d√≠a?",
        options: [
          { text: "Nunca üòû", score: 1 },
          { text: "Poco üòê", score: 2 },
          { text: "Regularmente üôÇ", score: 3 },
          { text: "Siempre üòä", score: 4 }
        ]
      },
      {
        question: "¬øCu√°ntas veces a la semana realizas actividad f√≠sica?",
        options: [
          { text: "Nunca üõãÔ∏è", score: 1 },
          { text: "1-2 veces üö∂", score: 2 },
          { text: "3-4 veces üèÉ", score: 3 },
          { text: "5 o m√°s veces üèãÔ∏è", score: 4 }
        ]
      },
      {
        question: "¬øQu√© tan frecuentemente planificas tus comidas con anticipaci√≥n?",
        options: [
          { text: "Nunca üòû", score: 1 },
          { text: "Rara vez üòê", score: 2 },
          { text: "A veces üôÇ", score: 3 },
          { text: "Siempre üòä", score: 4 }
        ]
      },
      {
        question: "¬øCon qu√© frecuencia optas por alternativas frescas en lugar de alimentos procesados?",
        options: [
          { text: "Nunca üòû", score: 1 },
          { text: "Rara vez üòê", score: 2 },
          { text: "A veces üôÇ", score: 3 },
          { text: "Siempre üòä", score: 4 }
        ]
      },
      {
        question: "¬øCu√°nto tiempo dedicas a leer etiquetas nutricionales?",
        options: [
          { text: "Nunca üòû", score: 1 },
          { text: "Poco üòê", score: 2 },
          { text: "Regularmente üôÇ", score: 3 },
          { text: "Siempre üòä", score: 4 }
        ]
      },
      {
        question: "¬øCon qu√© frecuencia desayunas de forma saludable?",
        options: [
          { text: "Nunca üòû", score: 1 },
          { text: "Rara vez üòê", score: 2 },
          { text: "A veces üôÇ", score: 3 },
          { text: "Siempre üòä", score: 4 }
        ]
      },
      {
        question: "¬øCon qu√© frecuencia evitas el exceso de az√∫cares?",
        options: [
          { text: "Nunca üòû", score: 1 },
          { text: "Rara vez üòê", score: 2 },
          { text: "A veces üôÇ", score: 3 },
          { text: "Siempre üòä", score: 4 }
        ]
      },
      {
        question: "¬øCon qu√© regularidad consumes porciones adecuadas?",
        options: [
          { text: "Nunca üòû", score: 1 },
          { text: "Rara vez üòê", score: 2 },
          { text: "A veces üôÇ", score: 3 },
          { text: "Siempre üòä", score: 4 }
        ]
      },
      {
        question: "¬øCu√°nto tiempo dedicas a preparar tus comidas en casa?",
        options: [
          { text: "Nunca üçΩÔ∏è", score: 1 },
          { text: "Poco üç≥", score: 2 },
          { text: "Regularmente ü•ò", score: 3 },
          { text: "Siempre üë®‚Äçüç≥", score: 4 }
        ]
      },
      {
        question: "¬øCon qu√© frecuencia consumes alimentos ricos en fibra?",
        options: [
          { text: "Nunca üòû", score: 1 },
          { text: "Rara vez üòê", score: 2 },
          { text: "A veces üôÇ", score: 3 },
          { text: "Siempre üòä", score: 4 }
        ]
      },
      {
        question: "¬øQu√© tan consciente eres de las porciones que sirves?",
        options: [
          { text: "Nada consciente üòû", score: 1 },
          { text: "Poco consciente üòê", score: 2 },
          { text: "Algo consciente üôÇ", score: 3 },
          { text: "Muy consciente üòä", score: 4 }
        ]
      },
      {
        question: "¬øCon qu√© frecuencia planificas tus comidas para la semana?",
        options: [
          { text: "Nunca üòû", score: 1 },
          { text: "Rara vez üòê", score: 2 },
          { text: "A veces üôÇ", score: 3 },
          { text: "Siempre üòä", score: 4 }
        ]
      },
{
  "question": "¬øCon qu√© frecuencia comes por estr√©s o aburrimiento?",
  "options": [
    { "text": "Diariamente üò£", "score": 1 },
    { "text": "Varias veces/semana üòñ", "score": 2 },
    { "text": "Ocasionalmente üòê", "score": 3 },
    { "text": "Casi nunca üòå", "score": 4 }
  ]
},
{
  "question": "¬øCu√°ntas veces comes fuera de casa semanalmente?",
  "options": [
    { "text": "7+ veces üçΩÔ∏è", "score": 1 },
    { "text": "4-6 veces ü•°", "score": 2 },
    { "text": "1-3 veces üç¥", "score": 3 },
    { "text": "Casi nunca üè†", "score": 4 }
  ]
},
{
  "question": "¬øQu√© cantidad de alcohol consumes semanalmente?",
  "options": [
    { "text": "M√°s de 14 unidades üçª", "score": 1 },
    { "text": "7-14 unidades üç∑", "score": 2 },
    { "text": "1-6 unidades ü•Ç", "score": 3 },
    { "text": "Nada üö±", "score": 4 }
  ]
},
{
  "question": "¬øQu√© tanto agregas sal adicional a tus comidas?",
  "options": [
    { "text": "En todas las comidas üßÇ", "score": 1 },
    { "text": "Frecuentemente ‚ö†Ô∏è", "score": 2 },
    { "text": "Ocasionalmente üëå", "score": 3 },
    { "text": "Nunca ‚ùå", "score": 4 }
  ]
},
{
  "question": "¬øCon qu√© frecuencia comes snacks despu√©s de cenar?",
  "options": [
    { "text": "Todas las noches üåô", "score": 1 },
    { "text": "3-4 veces/semana üïò", "score": 2 },
    { "text": "1-2 veces/semana üïó", "score": 3 },
    { "text": "Casi nunca üö´", "score": 4 }
  ]
},
{
  "question": "¬øQu√© tan diversa es tu dieta semanal?",
  "options": [
    { "text": "Como siempre lo mismo üîÅ", "score": 1 },
    { "text": "Poca variedad ü•™", "score": 2 },
    { "text": "Alguna variedad ü•ó", "score": 3 },
    { "text": "Muy variada üåà", "score": 4 }
  ]
},
        ];

        let currentQuestion = 0;
        let score = 0;
        let selectedQuestions = [];

        function startTest() {
            document.getElementById('welcomeScreen').style.display = 'none';
            document.getElementById('testContent').style.display = 'block';
            selectedQuestions = questionBank.sort(() => 0.5 - Math.random()).slice(0, 10);
            showQuestion();
        }

        function showQuestion() {
            const question = selectedQuestions[currentQuestion];
            const optionsHTML = question.options.map((option, index) => `
                <button class="option-btn" onclick="selectOption(${index})">
                    ${option.text}
                </button>
            `).join('');

            document.getElementById('questionContainer').innerHTML = `
                <div class="question-card">
                    <div class="question-text">${question.question}</div>
                    <div class="options-grid">${optionsHTML}</div>
                </div>
            `;

            updateProgress();
        }

        function selectOption(optionIndex) {
            score += selectedQuestions[currentQuestion].options[optionIndex].score;
            currentQuestion++;
            
            if(currentQuestion < selectedQuestions.length) {
                showQuestion();
            } else {
                showResults();
            }
        }

        function updateProgress() {
            const progress = (currentQuestion / selectedQuestions.length) * 100;
            document.getElementById('progressBar').style.width = `${progress}%`;
        }

        function showResults() {
            document.getElementById('testContent').style.display = 'none';
            document.getElementById('resultsScreen').style.display = 'block';
            
            const maxScore = selectedQuestions.length * 4;
            const percentage = (score / maxScore) * 100;
            let emoji, message, showCalendar;

           if (percentage >= 90) {
    emoji = "üéâ";
    message = `¬°Incre√≠ble! (${percentage.toFixed(0)}%)<br>
    Tus h√°bitos nutricionales son excelentes. Est√°s tomando decisiones inteligentes para tu bienestar. ¬°Sigue as√≠ y disfruta de una vida saludable!`;
    showCalendar = false;
} else if (percentage >= 70) {
    emoji = "üëç";
    message = `¬°Buen trabajo! (${percentage.toFixed(0)}%)<br>
    Vas por un camino saludable, pero a√∫n hay margen para mejorar. Peque√±os cambios pueden marcar una gran diferencia. ¬°Sigue adelante!`;
    showCalendar = false;
} else if (percentage >= 50) {
    emoji = "ü§î";
    message = `Tu alimentaci√≥n puede mejorar (${percentage.toFixed(0)}%)<br>
    Hay algunos h√°bitos que podr√≠an estar afectando tu bienestar. Iniciar con ajustes simples te ayudar√° a sentirte mejor cada d√≠a.<br>
    <strong>¬øListo/a para mejorar tu salud?</strong> Da el siguiente paso y <a href="#" onclick="scheduleAppointment()">agenda una cita con el nutri√≥logo</a>.`;
    showCalendar = true;
} else {
    emoji = "‚ö†Ô∏è";
    message = `¬°Atenci√≥n! (${percentage.toFixed(0)}%)<br>
    Es importante tomar acci√≥n cuanto antes. Tus h√°bitos alimenticios pueden estar afectando tu salud y bienestar.<br>
    <strong>¬°Tu cuerpo te lo agradecer√°!</strong> Un especialista puede guiarte para mejorar tu nutrici√≥n. <a href="#" onclick="scheduleAppointment()">Haz clic aqu√≠ y agenda una cita</a>.`;
    showCalendar = true;
}


            document.getElementById('resultEmoji').textContent = emoji;
            document.getElementById('resultText').innerHTML = `
                <h2>Resultado: ${score}/${maxScore}</h2>
                <p>${message}</p>
            `;

            const buttons = `
                <button class="action-btn restart-btn" onclick="restartTest()">
                    <i class="fas fa-redo"></i> Reiniciar
                </button>
                <button class="action-btn copy-btn" onclick="copyResults()">
                    <i class="fas fa-copy"></i> Copiar
                </button>
                ${showCalendar ? `
                <button class="action-btn calendar-btn" onclick="scheduleAppointment()">
                    <i class="fas fa-calendar-check"></i> Agendar cita
                </button>` : ''}
            `;

            document.getElementById('actionBtns').innerHTML = buttons;
        }

        function restartTest() {
            currentQuestion = 0;
            score = 0;
            document.getElementById('resultsScreen').style.display = 'none';
            document.getElementById('welcomeScreen').style.display = 'block';
        }

        function copyResults() {
            const text = `Resultado del Test Nutricional: ${score}/${selectedQuestions.length * 4}`;
            navigator.clipboard.writeText(text);
            alert('Resultados copiados al portapapeles');
        }

        function scheduleAppointment() {
            const date = new Date();
            date.setDate(date.getDate() + 2);
            const endDate = new Date(date);
            endDate.setHours(endDate.getHours() + 1);
            
            const calendarUrl = new URL('https://calendar.app.google/6HRd3pGoEYGWapQd8');
            calendarUrl.searchParams.set('action', 'TEMPLATE');
            calendarUrl.searchParams.set('text', 'Consulta Nutricional');
            calendarUrl.searchParams.set('dates', `${formatDate(date)}/${formatDate(endDate)}`);
            calendarUrl.searchParams.set('details', `Resultado del test: ${score}/${selectedQuestions.length * 4}`);
            
            window.open(calendarUrl, '_blank');
        }

        function formatDate(date) {
            return date.toISOString().replace(/-|:|\.\d+/g, '');
        }
    </script>
</body>
</html>
